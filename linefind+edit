#include <iostream>
#include <fstream>
#include <vector>
#include <string>
#include <stdio.h>

using namespace std;

int line(string a)
{

	int searchLine = 0;
	int counter = 0;
	int pos = 0;
	string out;
	ifstream FileSearch("test.txt");
	// searches for the pharse in a file
	while (!FileSearch.eof())
	{
		getline(FileSearch, out);
		if (out.find(a) != string::npos) {
			cout << a << " found on line: " << searchLine << "\n\n"; //printed if phrase is found
			break;
		}
		searchLine++;
	}
	FileSearch.close();

	return searchLine;
}

void editor(int b, string line)
{
	ifstream oldfile;
	oldfile.open("test.txt");
	ofstream newfile;
	newfile.open("temp.txt");
	string replace;
	int counter = 0;
	while (!oldfile.eof())
	{
		getline(oldfile, replace);
		if (counter == b)
		{
			cout << replace << "\n";
			replace = "Colour: " + line;
			cout << "hi";
		}
		replace += "\n";
		newfile << replace;
		counter++;
	}
	oldfile.close();
	newfile.close();

	remove("test.txt");
	rename("temp.txt", "test.txt");

}

void create()
{
	ofstream my_file;
	my_file.open("test.txt");
	if (!my_file)
	{
		cout << "File not created!";
	}
	else
	{
		cout << "File created successfully!" << endl;
		my_file << "Tester file\n\n";
		my_file << "Name: charles r\nAge:27\nColour: Red\n\nName: Tiffany c\nAge:43\nColour:blue";

		my_file.close();
	}
}

int main()
{
	string a;
	string c;
	cout << "what do you want to search for: " << endl;
	cin >> a;

	create();
	//getLine(a);
	int b = line(a);

	cout << "what word do you want to replace with: " << endl;
	cin >> c;

	editor(b, c);

}
